<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Core Concepts - Forge Kernel Documentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/docs.css">
</head>

<body class="bg-gray-50 text-gray-900">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-xl font-bold text-gray-900">
                            Forge Kernel
                        </h1>
                    </div>
                    <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
                        <a href="index.html"
                            class="text-gray-900 inline-flex items-center px-1 pt-1 text-sm font-medium hover:text-blue-600">
                            Home
                        </a>
                        <a href="getting-started.html"
                            class="text-gray-900 inline-flex items-center px-1 pt-1 text-sm font-medium hover:text-blue-600">
                            Getting Started
                        </a>
                        <a href="core-concepts.html"
                            class="text-blue-600 inline-flex items-center px-1 pt-1 text-sm font-medium border-b-2 border-blue-600">
                            Core Concepts
                        </a>
                        <a href="modules.html"
                            class="text-gray-900 inline-flex items-center px-1 pt-1 text-sm font-medium hover:text-blue-600">
                            Capabilities
                        </a>
                        <a href="api-reference.html"
                            class="text-gray-900 inline-flex items-center px-1 pt-1 text-sm font-medium hover:text-blue-600">
                            API Reference
                        </a>
                    </div>
                </div>
                <!-- Mobile menu button -->
                <div class="flex items-center sm:hidden">
                    <button id="mobile-menu-button" class="text-gray-700 hover:text-blue-600 p-2">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile menu -->
        <div id="mobile-menu" class="sm:hidden hidden bg-white border-t border-gray-200">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <a href="index.html"
                    class="block px-3 py-2 text-gray-900 hover:text-blue-600">
                    Home
                </a>
                <a href="getting-started.html"
                    class="block px-3 py-2 text-gray-900 hover:text-blue-600">
                    Getting Started
                </a>
                <a href="core-concepts.html"
                    class="block px-3 py-2 text-blue-600 font-medium">
                    Core Concepts
                </a>
                <a href="modules.html"
                    class="block px-3 py-2 text-gray-900 hover:text-blue-600">
                    Capabilities
                </a>
                <a href="api-reference.html"
                    class="block px-3 py-2 text-gray-900 hover:text-blue-600">
                    API Reference
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Sidebar Navigation -->
            <div id="sidebar-nav" class="lg:w-1/4">
                <!-- Mobile menu overlay -->
                <div id="mobile-menu-overlay" class="mobile-menu-overlay"></div>

                <div class="bg-white rounded-lg shadow-sm p-6 sticky top-8">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">
                        Core Concepts
                    </h3>
                    <nav class="space-y-2">
                        <a href="#architecture"
                            class="nav-link block px-3 py-2 text-sm text-gray-700 rounded-md hover:text-blue-600">
                            Architecture
                        </a>
                        <a href="#dependency-injection"
                            class="nav-link block px-3 py-2 text-sm text-gray-700 rounded-md hover:text-blue-600">
                            Dependency Injection
                        </a>
                        <a href="#routing-system"
                            class="nav-link block px-3 py-2 text-sm text-gray-700 rounded-md hover:text-blue-600">
                            Routing System
                        </a>
                        <a href="#middleware"
                            class="nav-link block px-3 py-2 text-sm text-gray-700 rounded-md hover:text-blue-600">
                            Middleware
                        </a>
                        <a href="#view-engine"
                            class="nav-link block px-3 py-2 text-sm text-gray-700 rounded-md hover:text-blue-600">
                            View Engine
                        </a>
                        <a href="#components"
                            class="nav-link block px-3 py-2 text-sm text-gray-700 rounded-md hover:text-blue-600">
                            Components
                        </a>
                        <a href="#database-orm"
                            class="nav-link block px-3 py-2 text-sm text-gray-700 rounded-md hover:text-blue-600">
                            Database & ORM
                        </a>
                        <a href="#capability-system"
                            class="nav-link block px-3 py-2 text-sm text-gray-700 rounded-md hover:text-blue-600">
                            Capability System
                        </a>
                        <a href="#configuration"
                            class="nav-link block px-3 py-2 text-sm text-gray-700 rounded-md hover:text-blue-600">
                            Configuration
                        </a>
                        <a href="#async-processing"
                            class="nav-link block px-3 py-2 text-sm text-gray-700 rounded-md hover:text-blue-600">
                            Async Processing
                        </a>
                        <a href="#cli-kernel"
                            class="nav-link block px-3 py-2 text-sm text-gray-700 rounded-md hover:text-blue-600">
                            CLI Kernel
                        </a>
                    </nav>
                </div>
            </div>

            <!-- Main Content -->
            <div class="lg:w-3/4">
                <div class="bg-white rounded-lg shadow-sm p-8">
                    <h1 class="text-4xl font-bold text-gray-900 mb-6">
                        Core Concepts
                    </h1>
                    <p class="text-xl text-gray-600 mb-8">
                        How Forge Kernel works under the hood.
                    </p>

                        <section id="architecture" class="section-anchor mb-12">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">Architecture</h2>
                        <p class="text-gray-600 mb-4">
                            Forge Kernel uses a modular architecture with dependency injection. It's built to be simple and flexible. Think of it like a foundation with utilities — you get the foundation, plumbing, electrical, and basic structure. You decide what to build on top.
                        </p>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Kernel Components (Built-in)</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 mb-4">
                            <li>Kernel Core</li>
                            <li>Router</li>
                            <li>View Engine</li>
                            <li>DI Container</li>
                            <li>Capability Loader</li>
                            <li>CLI Kernel</li>
                            <li>Bootstrap</li>
                            <li>Config Manager</li>
                        </ul>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Capabilities (Pluggable)</h3>
                        <p class="text-gray-600 mb-4">
                            These are <strong>not</strong> built into the kernel. Install them as capabilities when needed:
                        </p>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 mb-4">
                            <li>Database (ForgeDatabaseSQL)</li>
                            <li>ORM (ForgeSqlOrm)</li>
                            <li>Authentication (ForgeAuth)</li>
                            <li>Storage (ForgeStorage)</li>
                            <li>And more...</li>
                        </ul>
                    </section>

                    <section id="dependency-injection">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">Dependency Injection</h2>
                        <p class="text-gray-600 mb-4">
                        Forge's DI container is like a smart warehouse manager. It knows where everything is stored, gets you what you need when you ask, and manages dependencies automatically. It resolves dependencies using PHP attributes, keeping code testable and clean.
                    </p>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Service Discovery</h3>
                        <p class="text-gray-600 mb-4">
                            Services with the <code class="bg-gray-100 px-2 py-1 rounded">#[Service]</code> attribute are automatically discovered from specific directories:
                        </p>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 mb-4">
                            <li><code class="bg-gray-100 px-2 py-1 rounded">app/Services/</code></li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">app/Repositories/</code></li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">app/Middlewares/</code></li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">app/Events/</code></li>
                            <li>Same structure in modules: <code class="bg-gray-100 px-2 py-1 rounded">modules/ModuleName/src/Services/</code>, etc.</li>
                        </ul>
                        <p class="text-gray-600 mb-4">
                            Service discovery happens once at bootstrap and uses a class map cache for performance. If you add a new service and it's not being discovered, clear the cache with <code class="bg-gray-100 px-2 py-1 rounded">php forge.php cache:flush</code>.
                        </p>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Service Registration</h3>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php

use Forge\Core\DI\Attributes\Service;

#[Service]
class UserService
{
    public function __construct(
        private UserRepository $repository,
        private EmailService $emailService
    ) {}
    
    public function createUser(array $data): User
    {
        $user = $this->repository->create($data);
        $this->emailService->sendWelcomeEmail($user);
        return $user;
    }
}

#[Service(singleton: true)] // Only one instance throughout the application
class CacheService
{
    private array $cache = [];
    
    public function get(string $key): mixed
    {
        return $this->cache[$key] ?? null;
    }
}</code></pre>
                    </div>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Interface Binding</h3>
                        <p class="text-gray-600 mb-4">
                            You can bind interfaces to implementations using the container's <code class="bg-gray-100 px-2 py-1 rounded">bind()</code> method. In modules, this is typically done in the module's <code class="bg-gray-100 px-2 py-1 rounded">register()</code> method.
                        </p>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php
// In a module's register() method
namespace App\Modules\ForgeAuth;

use Forge\Core\DI\Container;
use App\Modules\ForgeAuth\Contracts\ForgeAuthInterface;
use App\Modules\ForgeAuth\Services\ForgeAuthService;
use App\Modules\ForgeAuth\Contracts\UserRepositoryInterface;
use App\Modules\ForgeAuth\Repositories\UserRepository;

public function register(Container $container): void
{
    // Bind interface to implementation
    $container->bind(ForgeAuthInterface::class, ForgeAuthService::class);
    
    // Bind with closure for complex dependencies
    $container->bind(UserRepositoryInterface::class, function ($container) {
        return new UserRepository($container->get(QueryCache::class));
    });
}</code></pre>
                        </div>
                        <p class="text-gray-600 mb-4">
                            <strong>Note:</strong> There is no <code class="bg-gray-100 px-2 py-1 rounded">#[Bind]</code> attribute. Interface binding is done programmatically in the container, typically in module registration or service providers.
                        </p>
                    </section>

                    <section id="routing-system">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">Routing System</h2>
                        <p class="text-gray-600 mb-4">
                        Attribute-based routing that auto-discovers routes from controllers. No separate route files needed.
                    </p>

                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php

use Forge\Core\Routing\Route;
use Forge\Core\Http\Request;
use Forge\Core\Http\Response;

class ApiController
{
    #[Route("/api/users")]
    public function listUsers(): Response
    {
        return $this->json(User::query()->get());
    }
    
    #[Route("/api/users/{id}", method: "GET")]
    public function getUser(Request $request, int $id): Response
    {
        $user = User::query()->id($id)->first();
        return $this->json($user);
    }
    
    #[Route("/api/users", method: "POST")]
    public function createUser(Request $request): Response
    {
        $data = $request->json();
        $user = User::create($data);
        return $this->json($user, 201);
    }
    
    #[Route("/api/users/{id}", method: "PUT")]
    public function updateUser(Request $request, int $id): Response
    {
        $user = User::query()->id($id)->first();
        $user->update($request->json());
        return $this->json($user);
    }
}</code></pre>
                    </div>

                        <p class="text-gray-600 mb-4">
                        <strong>Note:</strong> Use curly braces for route parameters. Names must match method params.
                    </p>
                </section>

                    <section id="middleware">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">Middleware</h2>
                        <p class="text-gray-600 mb-4">
                        Filter HTTP requests before they hit your application.
                    </p>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Built-in Middleware</h3>
                        <p class="text-gray-600 mb-4">
                            The engine comes with a comprehensive set of middleware organized into groups:
                        </p>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 mb-4">
                            <li><strong>Global group:</strong>
                                <ul class="list-disc list-inside ml-6 mt-2 space-y-1">
                                    <li><code class="bg-gray-100 px-2 py-1 rounded">SessionMiddleware</code> (order: 0)</li>
                                    <li><code class="bg-gray-100 px-2 py-1 rounded">RateLimitMiddleware</code> (order: 0)</li>
                                    <li><code class="bg-gray-100 px-2 py-1 rounded">CircuitBreakerMiddleware</code> (order: 1)</li>
                                    <li><code class="bg-gray-100 px-2 py-1 rounded">CorsMiddleware</code> (order: 2)</li>
                                    <li><code class="bg-gray-100 px-2 py-1 rounded">SanitizeInputMiddleware</code> (order: 3, enabled: false by default)</li>
                                    <li><code class="bg-gray-100 px-2 py-1 rounded">CompressionMiddleware</code> (order: 4)</li>
                                </ul>
                            </li>
                            <li><strong>Web group:</strong>
                                <ul class="list-disc list-inside ml-6 mt-2 space-y-1">
                                    <li><code class="bg-gray-100 px-2 py-1 rounded">CsrfMiddleware</code> (order: 1)</li>
                                    <li><code class="bg-gray-100 px-2 py-1 rounded">RelaxSecurityHeadersMiddleware</code> (order: 3)</li>
                                </ul>
                            </li>
                            <li><strong>API group:</strong>
                                <ul class="list-disc list-inside ml-6 mt-2 space-y-1">
                                    <li><code class="bg-gray-100 px-2 py-1 rounded">IpWhiteListMiddleware</code> (order: 0)</li>
                                    <li><code class="bg-gray-100 px-2 py-1 rounded">ApiKeyMiddleware</code> (order: 1)</li>
                                    <li><code class="bg-gray-100 px-2 py-1 rounded">ApiMiddleware</code> (order: 2)</li>
                                    <li><code class="bg-gray-100 px-2 py-1 rounded">CookieMiddleware</code> (order: 2)</li>
                                </ul>
                            </li>
                        </ul>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Middleware Configuration</h3>
                        <p class="text-gray-600 mb-4">
                            Configure middleware groups, order, and overrides in <code class="bg-gray-100 px-2 py-1 rounded">config/middleware.php</code>:
                        </p>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php
// config/middleware.php
return [
    'global' => [
        // Add your own middleware to global group
        \App\Middlewares\CustomMiddleware::class,
    ],
    'web' => [
        // Override order or add middleware to web group
        \App\Middlewares\CustomWebMiddleware::class,
    ],
    'api' => [
        // Create custom API middleware groups
        \App\Middlewares\ApiAuthMiddleware::class,
    ],
    'api-auth' => [
        // Create new middleware groups
        App\Modules\ForgeAuth\Middlewares\ApiJwtMiddleware::class,
    ]
];</code></pre>
                        </div>
                        <p class="text-gray-600 mb-4">
                            You can:
                        </p>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 mb-4">
                            <li><strong>Create new middleware groups:</strong> Add new keys to the array</li>
                            <li><strong>Override order:</strong> Change the order of built-in middleware by adjusting their position in the array</li>
                            <li><strong>Override built-in middleware:</strong> If you create a middleware with the same class name as a built-in one, your custom version will be used instead</li>
                            <li><strong>Apply groups:</strong> Use <code class="bg-gray-100 px-2 py-1 rounded">#[Middleware("group-name")]</code> on controllers or methods</li>
                        </ul>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Creating Middleware</h3>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php

use Forge\Core\Http\Middleware;
use Forge\Core\Http\Request;
use Forge\Core\Http\Response;

class AuthMiddleware extends Middleware
{
    public function handle(Request $request, callable $next): Response
    {
        if (!$request->hasHeader('Authorization')) {
            return new Response('Unauthorized', 401);
        }
        
        // Continue to next middleware or controller
        return $next($request);
    }
}</code></pre>
                    </div>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Applying Middleware</h3>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php

use Forge\Core\Http\Attributes\Middleware;

// Apply middleware to entire controller
#[Middleware("auth")]
class DashboardController
{
    #[Route("/dashboard")]
    public function index(): Response
    {
        return $this->view('dashboard/index');
    }
    
    #[Route("/dashboard/settings")]
    public function settings(): Response
    {
        return $this->view('dashboard/settings');
    }
}

// Apply middleware to specific methods
class UserController
{
    #[Middleware("App\Modules\ForgeAuth\Middlewares\AuthMiddleware")]
    #[Route("/profile")]
    public function profile(): Response
    {
        return $this->view('user/profile');
    }
    
    // Multiple middleware using repeatable attribute
    #[Middleware("web")]
    #[Middleware("auth")]
    #[Route("/admin")]
    public function admin(): Response
    {
        return $this->view('admin/dashboard');
    }
}</code></pre>
                    </div>

                        <p class="text-gray-600 mb-4">
                        Use <code>#[Middleware]</code> for controllers/methods, or <code>middlewares</code> in <code>#[Route]</code> for routes.
                    </p>
                </section>

                    <section id="view-engine">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">View Engine</h2>
                        <p class="text-gray-600 mb-4">
                        PHP-first templating. No new syntax to learn.
                    </p>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Template Inheritance</h3>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;!-- layouts/app.php --&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;&lt;?= $title ?? 'My App' ?&gt;&lt;/title&gt;
    &lt;?php use Forge\Core\View\View; echo View::section('head'); ?&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;header&gt;
        &lt;?php use Forge\Core\View\View; echo View::section('header'); ?&gt;
    &lt;/header&gt;
    
    &lt;main&gt;
        &lt;?php use Forge\Core\View\View; echo View::section('content'); ?&gt;
    &lt;/main&gt;
    
    &lt;footer&gt;
        &lt;?php use Forge\Core\View\View; echo View::section('footer'); ?&gt;
    &lt;/footer&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                    </div>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Child Templates</h3>
                        <p class="text-gray-600 mb-4">
                            The <code class="bg-gray-100 px-2 py-1 rounded">loadFromModule</code> parameter is optional and defaults to <code class="bg-gray-100 px-2 py-1 rounded">false</code>. When <code class="bg-gray-100 px-2 py-1 rounded">false</code> (default), the layout must exist in <code class="bg-gray-100 px-2 py-1 rounded">app/resources/views/layouts/</code>. When <code class="bg-gray-100 px-2 py-1 rounded">true</code>, the layout is loaded from <code class="bg-gray-100 px-2 py-1 rounded">modules/ModuleName/src/Resources/views/layouts/</code>.
                        </p>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;!-- pages/home.php --&gt;
&lt;?php 
use Forge\Core\View\View; 

// Default (loadFromModule: false) - layout must be in app/resources/views/layouts/
View::layout(name: "layouts/app");

// Or explicitly specify
View::layout(name: "layouts/app", loadFromModule: false);

// Load from module
View::layout(name: "layouts/app", loadFromModule: true);
?&gt;

&lt;?php View::startSection('head'); ?&gt;
    &lt;link rel="stylesheet" href="/css/home.css"&gt;
&lt;?php View::endSection(); ?&gt;

&lt;?php View::startSection('content'); ?&gt;
    &lt;div class="hero"&gt;
        &lt;h1&gt;Welcome to &lt;?= $appName ?&gt;&lt;/h1&gt;
        &lt;p&gt;&lt;?= $description ?&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;?php View::endSection(); ?&gt;</code></pre>
                        </div>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Components</h3>
                        <p class="text-gray-600 mb-4">
                        Components are reusable UI pieces. Forge provides flexible ways to create components — with or without PHP classes, with or without view files, in app scope or module scope, with or without DTOs. Choose the approach that fits your needs.
                    </p>

                        <h4 class="text-lg font-semibold mb-3 text-gray-900">Component Locations</h4>
                        <p class="text-gray-600 mb-4">
                        Components can be created in two scopes:
                    </p>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 mb-4">
                        <li><strong>App Scope:</strong> <code>app/Components/</code> — Components specific to your application</li>
                        <li><strong>Module Scope:</strong> <code>modules/ModuleName/src/Resources/components/</code> — Components bundled with capabilities</li>
                    </ul>

                        <h4 class="text-lg font-semibold mb-3 text-gray-900">1. Class-Based Components (With PHP Class)</h4>
                        <p class="text-gray-600 mb-4">
                        Class-based components extend <code>BaseComponent</code> and can use DTOs, view files, or return HTML directly.
                    </p>

                    <h5>App Scope Component with DTO</h5>
                        <p class="text-gray-600 mb-4">
                            When using <code class="bg-gray-100 px-2 py-1 rounded">useDto: true</code>, you must create the DTO class manually. The DTO should be placed in the same directory as the component.
                        </p>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php
// app/Components/Ui/AlertPropsDto.php
namespace App\Components\Ui;

class AlertPropsDto
{
    public function __construct(
        public string $type = 'info',
        public string $message = '',
        public ?string $title = null
    ) {}
}

// app/Components/Ui/Alert.php
namespace App\Components\Ui;

use Forge\Core\View\BaseComponent;
use Forge\Core\View\Component;

#[Component(name: 'Ui/Alert', useDto: true)]
final class Alert extends BaseComponent
{
    public function render(): string
    {
        return $this->renderview('ui/alert', $this->props);
    }
}</code></pre>
                        </div>
                        <p class="text-gray-600 mb-4">
                            <strong>Note:</strong> DTOs are not created automatically. You must create the DTO class yourself when using <code class="bg-gray-100 px-2 py-1 rounded">useDto: true</code>. The DTO will be automatically instantiated and passed as <code class="bg-gray-100 px-2 py-1 rounded">$this->props</code>.
                        </p>

                    <h5>Module Scope Component with DTO</h5>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php
// modules/ForgeUi/src/Resources/components/Ui/Alert.php
namespace App\Modules\ForgeUi\Resources\Components\Ui;

use Forge\Core\View\BaseComponent;
use Forge\Core\View\Component;

#[Component(name: "ForgeUi:Ui/Alert", useDto: true)]
final class Alert extends BaseComponent
{
    public function render(): string
    {
        return $this->renderview(
            viewPath: "ui/alert",
            data: $this->props,
            loadFromModule: true
        );
    }
}</code></pre>
                    </div>
                        <p class="text-gray-600 mb-4">
                        Module components use the <code>ModuleName:Path</code> syntax and set <code>loadFromModule: true</code> when rendering views.
                    </p>

                    <h5>Component Without DTO (Direct Props)</h5>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php
// app/Components/Ui/Button.php
namespace App\Components\Ui;

use Forge\Core\View\BaseComponent;
use Forge\Core\View\Component;

#[Component(name: 'Ui/Button')]
final class Button extends BaseComponent
{
    public function __construct(
        public string $text = '',
        public string $type = 'button'
    ) {}
    
    public function render(): string
    {
        return $this->renderview('ui/button', [
            'text' => $this->text,
            'type' => $this->type
        ]);
    }
}</code></pre>
                    </div>

                    <h5>Component Returning HTML Directly (No View File)</h5>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php
// app/Components/Ui/Badge.php
namespace App\Components\Ui;

use Forge\Core\View\BaseComponent;
use Forge\Core\View\Component;

#[Component(name: 'Ui/Badge')]
final class Badge extends BaseComponent
{
    public function __construct(
        public string $text = '',
        public string $color = 'blue'
    ) {}
    
    public function render(): string
    {
        return raw(
            '&lt;span class="badge badge-' . 
            htmlspecialchars($this->color) . 
            '"&gt;' . 
            htmlspecialchars($this->text) . 
            '&lt;/span&gt;'
        );
    }
}</code></pre>
                    </div>
                        <p class="text-gray-600 mb-4">
                        Use the <code>raw()</code> helper when returning HTML directly without a view file.
                    </p>

                        <h4 class="text-lg font-semibold mb-3 text-gray-900">2. View-Only Components (Without PHP Class)</h4>
                        <p class="text-gray-600 mb-4">
                        For simple presentational components, create only a view file. No PHP class needed.
                    </p>
                        <p class="text-gray-600 mb-4">
                        Create a view file at <code>app/resources/components/ui/alert.php</code>:
                    </p>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;!-- app/resources/components/ui/alert.php --&gt;
&lt;div class="alert alert-&lt;?= $type ?? 'info' ?&gt;"&gt;
    &lt;?= htmlspecialchars($message ?? '') ?&gt;
&lt;/div&gt;</code></pre>
                    </div>
                        <p class="text-gray-600 mb-4">
                        For module-scoped view components, place them in <code>modules/ModuleName/src/Resources/views/components/</code>.
                    </p>

                        <h4 class="text-lg font-semibold mb-3 text-gray-900">Using Components</h4>
                        <p class="text-gray-600 mb-4">
                        Use the <code>component()</code> helper function to render components:
                    </p>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php
// App scope class-based component
echo component('Ui/Alert', 'class', [
    'type' => 'success',
    'message' => 'User created successfully!'
]);

// Module scope class-based component (auto-detected by ":" syntax)
echo component('ForgeUi:Ui/Alert', 'class', [
    'type' => 'success',
    'children' => 'User created successfully!'
], fromModule: true);

// View-only component (app scope)
echo component('ui/alert', 'view', [
    'type' => 'success',
    'message' => 'User created successfully!'
]);

// View-only component (module scope)
echo component('ui/alert', 'view', [
    'type' => 'success',
    'message' => 'User created successfully!'
], fromModule: true);

// Using Component class directly
use Forge\Core\View\Component;
echo Component::render('Ui/Alert', [
    'type' => 'success',
    'message' => 'User created successfully!'
]);

// Using View class for view-only components
use Forge\Core\View\View;
echo View::viewComponent('ui/alert', [
    'type' => 'success',
    'message' => 'User created successfully!'
]);</code></pre>
                    </div>

                        <h4 class="text-lg font-semibold mb-3 text-gray-900">Real-World Example</h4>
                        <p class="text-gray-600 mb-4">
                        Here's how a module component is used in practice:
                    </p>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php
// modules/ForgeUi/src/Resources/views/components/ui/flash-message.php
use Forge\Core\Helpers\Flash;

$flashMessages = Flash::flat() ?? [];
?&gt;
&lt;?php if (!empty($flashMessages)): ?&gt;
    &lt;div&gt;
        &lt;?php foreach ($flashMessages as $msg): ?&gt;
            &lt;?=
            component(name: "ForgeUi:Ui/Alert", props: [
                "type" => $msg["type"],
                "children" => $msg["message"]
            ], fromModule: true)
            ?&gt;
        &lt;?php endforeach; ?&gt;
    &lt;/div&gt;
&lt;?php endif; ?&gt;</code></pre>
                    </div>

                        <h4 class="text-lg font-semibold mb-3 text-gray-900">When to Use Each Approach</h4>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 mb-4">
                        <li><strong>Class-based with DTO:</strong> When you want type safety and IDE autocomplete for component props. Best for reusable components with multiple properties.</li>
                        <li><strong>Class-based without DTO:</strong> For simpler components where direct constructor parameters are sufficient.</li>
                        <li><strong>Class-based returning HTML:</strong> For very simple components that don't need a separate view file. Useful for small, self-contained UI elements.</li>
                        <li><strong>View-only components:</strong> Perfect for simple presentational components that just display data. Fastest to create, no PHP class needed.</li>
                        <li><strong>App scope:</strong> Use for application-specific components that won't be shared.</li>
                        <li><strong>Module scope:</strong> Use when creating reusable capability components that can be distributed with your module.</li>
                    </ul>
                </section>

                    <section id="database-orm">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">Database & ORM (Capabilities)</h2>
                        <p class="text-gray-600 mb-4">
                        Database and ORM are <strong>not built into the kernel</strong>. They're capabilities you install when you need them. The kernel provides <strong>contracts (interfaces)</strong> for database operations, but these contracts must be implemented by a module.
                    </p>
                        <p class="text-gray-600 mb-4">
                        <strong>Important:</strong> The kernel provides <code class="bg-gray-100 px-2 py-1 rounded">DatabaseConnectionInterface</code> and <code class="bg-gray-100 px-2 py-1 rounded">QueryBuilderInterface</code> contracts, but they won't work unless you install a module that implements them. For example:
                        </p>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 mb-4">
                            <li><code class="bg-gray-100 px-2 py-1 rounded">ForgeDatabaseSQL</code> implements <code class="bg-gray-100 px-2 py-1 rounded">DatabaseConnectionInterface</code></li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">ForgeSqlOrm</code> implements <code class="bg-gray-100 px-2 py-1 rounded">QueryBuilderInterface</code></li>
                            <li>You can also create your own module that implements these contracts</li>
                        </ul>
                        <p class="text-gray-600 mb-4">
                        Forge provides <strong>three ways to work with data</strong>:
                        </p>
                        <ol class="list-decimal list-inside space-y-2 text-gray-600 mb-4">
                            <li><strong>Raw SQL Queries:</strong> Use <code class="bg-gray-100 px-2 py-1 rounded">DatabaseConnectionInterface</code> (requires ForgeDatabaseSQL) or <code class="bg-gray-100 px-2 py-1 rounded">QueryBuilderInterface</code> (requires ForgeSqlOrm) for direct database access.</li>
                            <li><strong>Query Builder:</strong> Use the fluent query builder interface for type-safe database operations (requires ForgeSqlOrm).</li>
                            <li><strong>ORM:</strong> Use the ForgeSqlOrm capability for attribute-based models and relationships.</li>
                        </ol>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Raw SQL Queries with DatabaseConnectionInterface</h3>
                        <p class="text-gray-600 mb-4">
                            When using <code class="bg-gray-100 px-2 py-1 rounded">DatabaseConnectionInterface</code>, you have direct access to PDO methods. This requires the <code class="bg-gray-100 px-2 py-1 rounded">ForgeDatabaseSQL</code> module to be installed.
                        </p>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php

use Forge\Core\Contracts\Database\DatabaseConnectionInterface;

class MyController
{
    public function __construct(
        private readonly DatabaseConnectionInterface $connection
    ) {}

    // Execute raw SQL (DDL statements)
    public function createTable(): void
    {
        $this->connection->exec(
            "CREATE TABLE IF NOT EXISTS example_table (id INTEGER PRIMARY KEY, name TEXT)"
        );
    }

    // Query with prepared statements
    public function findUser(int $id): array
    {
        $stmt = $this->connection->prepare("SELECT * FROM users WHERE id = :id");
        $stmt->execute([':id' => $id]);
        return $stmt->fetchAll(\PDO::FETCH_ASSOC);
    }

    // Simple query (no parameters)
    public function getAllUsers(): array
    {
        $stmt = $this->connection->query("SELECT * FROM users LIMIT 5");
        return $stmt->fetchAll(\PDO::FETCH_ASSOC);
    }
}</code></pre>
                        </div>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Raw SQL Queries with QueryBuilderInterface</h3>
                        <p class="text-gray-600 mb-4">
                            When using <code class="bg-gray-100 px-2 py-1 rounded">QueryBuilderInterface</code>, you can use raw SQL methods or combine them with the query builder. This requires the <code class="bg-gray-100 px-2 py-1 rounded">ForgeSqlOrm</code> module to be installed.
                        </p>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php

use App\Modules\ForgeSqlOrm\ORM\QueryBuilder;

class MyController
{
    public function __construct(
        private readonly QueryBuilder $builder
    ) {}

    // Raw SQL query
    public function rawQuery(): array
    {
        return $this->builder->raw(
            "SELECT * FROM users WHERE status = :status",
            [':status' => 'active']
        );
    }

    // WhereRaw with query builder
    public function whereRawExample(): array
    {
        return $this->builder
            ->table('users')
            ->whereRaw('status = :status', [':status' => 'active'])
            ->get();
    }

    // Combined: query builder + raw SQL
    public function combinedExample(): array
    {
        return $this->builder
            ->table('users')
            ->select('id', 'email', 'identifier')
            ->where('status', '=', 'active')
            ->whereRaw('identifier IS NOT NULL', [])
            ->orderBy('created_at', 'DESC')
            ->limit(10)
            ->get();
    }
}</code></pre>
                        </div>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Transactions</h3>
                        <p class="text-gray-600 mb-4">
                            Both interfaces support database transactions. Here are examples of commit and rollback operations:
                        </p>

                        <h4 class="text-lg font-semibold mb-3 text-gray-900">Transactions with DatabaseConnectionInterface</h4>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php

// Transaction with commit
public function transactionCommit(): array
{
    $this->connection->beginTransaction();
    try {
        $stmt = $this->connection->prepare("INSERT INTO example_table (name) VALUES (:name)");
        $stmt->execute([':name' => 'transaction_test_commit']);
        $this->connection->commit();
        return ['status' => 'committed', 'message' => 'Transaction committed successfully'];
    } catch (\Exception $e) {
        $this->connection->rollBack();
        return ['status' => 'error', 'message' => $e->getMessage()];
    }
}

// Transaction with rollback
public function transactionRollback(): array
{
    $this->connection->beginTransaction();
    try {
        $stmt = $this->connection->prepare("INSERT INTO example_table (name) VALUES (:name)");
        $stmt->execute([':name' => 'transaction_test_rollback']);
        throw new \Exception('Simulated error to trigger rollback');
    } catch (\Exception $e) {
        $this->connection->rollBack();
        return ['status' => 'rolled_back', 'message' => 'Transaction rolled back successfully'];
    }
}</code></pre>
                        </div>

                        <h4 class="text-lg font-semibold mb-3 text-gray-900">Transactions with QueryBuilderInterface</h4>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php

// Transaction with commit
public function transactionCommit(): array
{
    try {
        $this->builder->beginTransaction();
        $id = $this->builder->table('example_table')->insert(['name' => 'orm_transaction_commit']);
        $this->builder->commit();
        return ['status' => 'committed', 'inserted_id' => $id];
    } catch (\Exception $e) {
        $this->builder->rollback();
        return ['status' => 'error', 'message' => $e->getMessage()];
    }
}

// Transaction with rollback
public function transactionRollback(): array
{
    try {
        $this->builder->beginTransaction();
        $this->builder->table('example_table')->insert(['name' => 'orm_transaction_rollback']);
        throw new \Exception('Simulated error to trigger rollback');
        $this->builder->commit();
    } catch (\Exception $e) {
        $this->builder->rollback();
        return ['status' => 'rolled_back', 'message' => 'Transaction rolled back successfully'];
    }
}</code></pre>
                        </div>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Model Definition</h3>
                        <p class="text-gray-600 mb-4">
                            Models extend the <code class="bg-gray-100 px-2 py-1 rounded">Model</code> base class and use attributes to define table structure, columns, and relationships. You can also use traits to add common functionality.
                        </p>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php

use App\Modules\ForgeSqlOrm\ORM\Model;
use App\Modules\ForgeSqlOrm\ORM\Attributes\Table;
use App\Modules\ForgeSqlOrm\ORM\Attributes\Column;
use App\Modules\ForgeSqlOrm\ORM\Attributes\ProtectedFields;
use App\Modules\ForgeSqlOrm\ORM\Values\Cast;
use App\Modules\ForgeSqlOrm\ORM\Values\Relate;
use App\Modules\ForgeSqlOrm\ORM\Values\Relation;
use App\Modules\ForgeSqlOrm\ORM\Values\RelationKind;
use App\Modules\ForgeSqlOrm\Traits\HasTimeStamps;
use App\Modules\ForgeSqlOrm\Traits\HasMetaData;
use App\Modules\ForgeSqlOrm\ORM\CanLoadRelations;

#[Table('users')]
#[ProtectedFields(['password'])]
class User extends Model
{
    use HasTimeStamps;  // Adds created_at and updated_at columns
    use CanLoadRelations;  // Enables relationship loading methods
    use HasMetaData;  // Adds metadata column for JSON data

    #[Column(primary: true, cast: Cast::INT)]
    public int $id;

    #[Column(cast: Cast::STRING)]
    public string $status;

    #[Column(cast: Cast::STRING)]
    public string $identifier;

    #[Column(cast: Cast::STRING)]
    public string $email;

    #[Column(cast: Cast::STRING)]
    public string $password;

    #[Column(cast: Cast::JSON)]
    public ?UserMetadataDto $metadata;  // Uses HasMetaData trait

    // Relationships use #[Relate] attribute
    #[Relate(RelationKind::HasOne, Profile::class, "user_id")]
    public function profile(): Relation
    {
        return self::describe(__FUNCTION__);
    }
}</code></pre>
                        </div>

                        <h4 class="text-lg font-semibold mb-3 text-gray-900">Available Traits</h4>
                        <p class="text-gray-600 mb-4">
                            ForgeSqlOrm provides several traits to add common functionality to your models:
                        </p>

                        <h5 class="text-lg font-semibold mb-3 text-gray-900">HasTimeStamps</h5>
                        <p class="text-gray-600 mb-4">
                            Automatically adds <code class="bg-gray-100 px-2 py-1 rounded">created_at</code> and <code class="bg-gray-100 px-2 py-1 rounded">updated_at</code> timestamp columns to your model. These are automatically managed by the ORM when creating or updating records.
                        </p>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php

use App\Modules\ForgeSqlOrm\Traits\HasTimeStamps;

class User extends Model
{
    use HasTimeStamps;
    
    // Automatically adds:
    // public ?DateTimeImmutable $created_at = null;
    // public ?DateTimeImmutable $updated_at = null;
}</code></pre>
                        </div>

                        <h5 class="text-lg font-semibold mb-3 text-gray-900">HasMetaData</h5>
                        <p class="text-gray-600 mb-4">
                            Adds a <code class="bg-gray-100 px-2 py-1 rounded">metadata</code> column for storing JSON data. Useful for flexible, schema-less data that doesn't need its own table.
                        </p>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php

use App\Modules\ForgeSqlOrm\Traits\HasMetaData;

class User extends Model
{
    use HasMetaData;
    
    // Automatically adds:
    // public ?array $metadata = null;
    
    // Usage:
    // $user->metadata = ['preferences' => ['theme' => 'dark']];
    // $user->save();
}</code></pre>
                        </div>

                        <h5 class="text-lg font-semibold mb-3 text-gray-900">CanLoadRelations</h5>
                        <p class="text-gray-600 mb-4">
                            Provides methods for loading and working with relationships. This trait is already included in the <code class="bg-gray-100 px-2 py-1 rounded">Model</code> base class, but you can use it explicitly if needed.
                        </p>
                        <p class="text-gray-600 mb-4">
                            Key methods:
                        </p>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 mb-4">
                            <li><code class="bg-gray-100 px-2 py-1 rounded">with(string ...$paths)</code> — Eager load relationships when querying</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">load(string ...$relations)</code> — Lazy load relationships on an existing model instance</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">relation(string $name)</code> — Get a query builder for a relationship</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">describe(string $method)</code> — Get relationship metadata</li>
                        </ul>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php

// Eager loading relationships
$user = User::with('profile')->id(1)->first();

// Lazy loading relationships
$user = User::query()->id(1)->first();
$user->load('profile');

// Using relation() to build queries
$posts = $user->relation('posts')->where('status', '=', 'published')->get();</code></pre>
                        </div>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Query Builder</h3>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php

// Get all records
$users = User::query()->get();

// Find by ID
$user = User::query()->id(1)->first();

// Where queries
$activeUsers = User::query()
    ->where('status', '=', 'active')
    ->get();

// Advanced queries
$users = User::query()
    ->where('created_at', '>', '2024-01-01')
    ->get();

// Eager load relationships (using with() static method)
$user = User::with('profile', 'posts')->id(1)->first();

// Or using query builder with with()
$user = User::query()
    ->with('profile', 'posts')
    ->id(1)
    ->first();

// Lazy load relationships on existing instance
$user = User::query()->id(1)->first();
$user->load('profile', 'posts');

// Access relationship using relation() method
$posts = $user->relation('posts')->where('status', '=', 'published')->get();</code></pre>
                    </div>
                        <p class="text-gray-600 mb-4">
                        <strong>Note:</strong> Forge uses a query builder pattern. Always start with <code class="bg-gray-100 px-2 py-1 rounded">Model::query()</code> to build queries. There are no static methods like <code class="bg-gray-100 px-2 py-1 rounded">all()</code> or <code class="bg-gray-100 px-2 py-1 rounded">find()</code> directly on the Model class. Use <code class="bg-gray-100 px-2 py-1 rounded">with()</code> for eager loading relationships, or <code class="bg-gray-100 px-2 py-1 rounded">load()</code> for lazy loading on existing instances.
                        </p>
                </section>

                    <section id="capability-system">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">Capability System</h2>
                        <p class="text-gray-600 mb-4">
                        Extend Forge Kernel with self-contained capability modules. Think of capabilities like modular additions to a house. The kernel gives you the foundation. Capabilities add what you need: database, ORM, authentication, storage — all optional, all pluggable.
                    </p>
                        <p class="text-gray-600 mb-4">
                        Need a database? Install a database capability. Need an ORM? Install an ORM capability. Don't need authentication? Don't install it. The kernel stays lean. You stay in control.
                    </p>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Capability Structure</h3>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">{
  "$schema": "./../../engine/Core/Schema/module-schema.json",
  "name": "forge-my-module",
  "version": "1.0.0",
  "description": "A custom module for my application",
  "type": "generic",
  "order": 100,
  "author": "Your Name",
  "license": "MIT"
}</code></pre>
                    </div>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Capability Class</h3>
                        <p class="text-gray-600 mb-4">
                            The <code class="bg-gray-100 px-2 py-1 rounded">#[Module]</code> attribute supports several options to control module behavior:
                        </p>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 mb-4">
                            <li><code class="bg-gray-100 px-2 py-1 rounded">core: true</code> — Module won't be auto-loaded. You must wire it manually in your bootstrap or service providers.</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">isCli: true</code> — Module won't be loaded in web context. Only loaded when running CLI commands.</li>
                        </ul>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php

namespace App\Modules\MyModule;

use Forge\Core\DI\Container;
use Forge\Core\Module\Attributes\Compatibility;
use Forge\Core\Module\Attributes\Module;
use Forge\Core\Module\Attributes\Repository;
use Forge\Core\Module\Attributes\ConfigDefaults;
use Forge\Core\Module\Attributes\PostInstall;
use Forge\Core\Module\Attributes\PostUninstall;
use Forge\Core\DI\Attributes\Service;
use Forge\Core\Module\Attributes\LifecycleHook;
use Forge\Core\Module\LifecycleHookName;
use App\Modules\MyModule\Contracts\MyModuleInterface;
use App\Modules\MyModule\Services\MyModuleService;

#[Module(
    name: 'MyModule',
    description: 'A custom module for my application',
    order: 100,
    core: false,  // Set to true to disable auto-loading
    isCli: false  // Set to true to only load in CLI context
)]
#[Service]
#[Compatibility(kernel: '>=0.1.0', php: '>=8.3')]
#[Repository(type: 'git', url: 'https://github.com/your-repo/modules')]
#[ConfigDefaults(defaults: [
    'my_module' => [
        'enabled' => true,
        'default_option' => 'value'
    ]
])]
#[PostInstall(command: 'migrate', args: ['--type=module', '--module=my-module'])]
#[PostUninstall(command: 'migrate:rollback', args: ['--type=module', '--module=my-module'])]
final class MyModule
{
    public function register(Container $container): void
    {
        // Register services
        $container->bind(MyModuleInterface::class, MyModuleService::class);
    }

    #[LifecycleHook(hook: LifecycleHookName::AFTER_MODULE_REGISTER)]
    public function onAfterModuleRegister(): void
    {
        // Boot logic after module registration
    }
}</code></pre>
                        </div>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Configuration Defaults</h3>
                        <p class="text-gray-600 mb-4">
                            The <code class="bg-gray-100 px-2 py-1 rounded">#[ConfigDefaults]</code> attribute allows you to define default configuration values directly in your module class, eliminating the need for a separate <code class="bg-gray-100 px-2 py-1 rounded">config/</code> folder and config file.
                        </p>
                        <p class="text-gray-600 mb-4">
                            You can still override these defaults by creating a config file in <code class="bg-gray-100 px-2 py-1 rounded">/config/</code> (e.g., <code class="bg-gray-100 px-2 py-1 rounded">config/my_module.php</code>). When loading configuration in your module, you need to explicitly define that the config can be overridden from the <code class="bg-gray-100 px-2 py-1 rounded">/config/</code> directory.
                        </p>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php

#[ConfigDefaults(defaults: [
    'my_module' => [
        'enabled' => true,
        'default_option' => 'value',
        'nested' => [
            'setting' => 'default'
        ]
    ]
])]
class MyModule
{
    // Config defaults are automatically available
    // Can be overridden in config/my_module.php
}</code></pre>
                        </div>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Post-Install and Post-Uninstall Hooks</h3>
                        <p class="text-gray-600 mb-4">
                            Use <code class="bg-gray-100 px-2 py-1 rounded">#[PostInstall]</code> and <code class="bg-gray-100 px-2 py-1 rounded">#[PostUninstall]</code> attributes to automatically run CLI commands after a module is installed or removed. This is useful for running migrations, linking assets, seeding data, or performing other setup/cleanup tasks.
                        </p>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php

#[PostInstall(command: 'migrate', args: ['--type=module', '--module=my-module'])]
#[PostInstall(command: 'asset:link', args: ['--type=module', '--module=my-module'])]
#[PostUninstall(command: 'migrate:rollback', args: ['--type=module', '--module=my-module'])]
#[PostUninstall(command: 'asset:unlink', args: ['--type=module', '--module=my-module'])]
class MyModule
{
    // Commands run automatically after install/uninstall
}</code></pre>
                        </div>
                        <p class="text-gray-600 mb-4">
                            You can specify multiple <code class="bg-gray-100 px-2 py-1 rounded">#[PostInstall]</code> or <code class="bg-gray-100 px-2 py-1 rounded">#[PostUninstall]</code> attributes. Commands are executed in the order they appear on the class.
                        </p>
                </section>

                    <section id="configuration">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">Configuration Management</h2>
                        <p class="text-gray-600 mb-4">
                        Environment-based configuration that's secure and flexible.
                    </p>

                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php

use Forge\Core\Config\Config;
use Forge\Core\Config\Environment;

// Using helper functions (recommended)
$dbHost = env('DB_HOST', 'localhost');
$debug = env('APP_DEBUG', false);
$appName = config('app.name', 'Forge App');

// Using Config class directly
$config = Config::get('database.connections.mysql');
Config::set('cache.driver', 'redis');

// Using Environment class directly  
$env = Environment::getInstance();
$port = $env->get('APP_PORT', 8000);
$isDev = $env->isDevelopment();
$debugEnabled = $env->isDebugEnabled();

// Checking if configuration exists
if (config('services.stripe.key')) {
    // Stripe is configured
}</code></pre>
                    </div>
                </section>

                    <section id="async-processing">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">Asynchronous Processing & Queues</h2>
                        <p class="text-gray-600 mb-4">
                        Understanding when and why to use queues, workers, and asynchronous processing.
                    </p>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">The Cashier & Warehouse Analogy</h3>
                        <p class="text-gray-600 mb-4">
                        Imagine a store with a cashier taking orders. Most orders are simple — "I want a sheet of paper" — and the cashier handles them quickly because the paper is right next to them. Everyone in line moves smoothly, no one notices any slowdown.
                    </p>
                        <p class="text-gray-600 mb-4">
                        But sometimes, someone needs something from the warehouse — like a screw that's 3 feet away. Now the cashier has to walk, pick up the screw, come back, and deliver both items. The person behind has to wait. This is called <strong>latency</strong> — the delay caused by the slower operation.
                    </p>
                        <p class="text-gray-600 mb-4">
                        If it's just one person, nothing bad happens. But what if 4 people in a row each need something from the warehouse? Or what if someone needs 2 shovels from deep in the warehouse, and the cashier doesn't know where they are? Now the whole process stops for everyone.
                    </p>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">The Solution: Workers</h3>
                        <p class="text-gray-600 mb-4">
                        To solve this, you hire a warehouse worker. The cashier handles simple orders (synchronous — fast). The warehouse worker handles complex orders (asynchronous — doesn't block the cashier). When an order needs something from the warehouse, the cashier writes it down and puts it in a queue. The warehouse worker picks up multiple orders at once (batch processing), goes to the warehouse, brings back all the items, and delivers them.
                    </p>
                        <p class="text-gray-600 mb-4">
                        If you need more capacity, you hire more workers. You can plan ahead — before a big sale or holiday, you allocate more workers a few hours before the rush. Everything feels smooth.
                    </p>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">In Your Application</h3>
                        <p class="text-gray-600 mb-4">
                        <strong>Synchronous (Cashier):</strong> Simple operations that are fast — rendering a view, returning JSON, simple database queries. These happen immediately and don't need queues.
                    </p>
                        <p class="text-gray-600 mb-4">
                        <strong>Asynchronous (Warehouse Worker):</strong> Complex operations that take time — sending emails, processing images, generating reports, calling external APIs. These go into a queue and are processed by workers.
                    </p>
                        <p class="text-gray-600 mb-4">
                        <strong>Batch Processing:</strong> Workers can process multiple jobs at once, like the warehouse worker bringing back multiple items in one trip.
                    </p>
                        <p class="text-gray-600 mb-4">
                        <strong>Scaling:</strong> Add more workers before peak times (holidays, promotions, scheduled events) to handle increased load smoothly.
                    </p>

                        <p class="text-gray-600 mb-4">
                        <strong>Key Takeaway:</strong> Not every task needs to go to a queue or be processed by a worker. Use queues for operations that would block or slow down your main application flow. Keep simple operations synchronous.
                    </p>
                </section>

                    <section id="cli-kernel">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">CLI Kernel</h2>
                        <p class="text-gray-600 mb-4">
                        The kernel provides a powerful CLI system for creating custom commands and automating tasks. Commands can be created in your application or provided by capabilities (modules).
                    </p>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Creating Custom Commands</h3>
                        <p class="text-gray-600 mb-4">
                            Commands use the <code class="bg-gray-100 px-2 py-1 rounded">#[Cli]</code> attribute to define the command name, description, usage, and examples. Arguments are defined using the <code class="bg-gray-100 px-2 py-1 rounded">#[Arg]</code> attribute on class properties.
                        </p>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php

declare(strict_types=1);

namespace App\Commands;

use Forge\CLI\Attributes\Arg;
use Forge\CLI\Attributes\Cli;
use Forge\CLI\Command;
use Forge\CLI\Traits\CliGenerator;
use Forge\Traits\StringHelper;

#[Cli(
    command: 'my:command',
    description: 'A custom command example',
    usage: 'my:command [--type=app|module] [--module=ModuleName] [--name=Example]',
    examples: [
        'my:command --type=app --name=Example',
        'my:command --type=module --module=Blog --name=Example',
        'my:command   (starts wizard)',
    ]
)]
final class MyCommand extends Command
{
    use StringHelper;
    use CliGenerator;  // Optional: for code generation commands

    #[Arg(name: 'type', description: 'app or module', default: 'app', validate: 'app|module')]
    private string $type = 'app';

    #[Arg(name: 'module', description: 'Module name when type=module', required: false)]
    private ?string $module = null;

    #[Arg(name: 'name', description: 'Name parameter')]
    private string $name = '';

    public function execute(array $args): int
    {
        $this->wizard($args);  // Interactive prompts if args missing

        if ($this->type === 'module' && !$this->module) {
            $this->error('--module=Name required when --type=module');
            return 1;
        }

        $this->info("Processing: {$this->name}");
        $this->success('Command completed successfully!');
        
        return 0;
    }
}</code></pre>
                        </div>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Command Discovery</h3>
                        <p class="text-gray-600 mb-4">
                            Commands are automatically discovered from:
                        </p>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 mb-4">
                            <li><code class="bg-gray-100 px-2 py-1 rounded">app/Commands/</code> — Application-scoped commands</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">modules/ModuleName/src/Commands/</code> — Module-scoped commands</li>
                        </ul>
                        <p class="text-gray-600 mb-4">
                            Commands must:
                        </p>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 mb-4">
                            <li>Extend the <code class="bg-gray-100 px-2 py-1 rounded">Command</code> base class</li>
                            <li>Use the <code class="bg-gray-100 px-2 py-1 rounded">#[Cli]</code> attribute</li>
                            <li>Implement the <code class="bg-gray-100 px-2 py-1 rounded">execute(array $args): int</code> method</li>
                        </ul>
                        <p class="text-gray-600 mb-4">
                            Commands are cached for performance. If you add a new command and it's not discovered, clear the cache with <code class="bg-gray-100 px-2 py-1 rounded">php forge.php cache:flush</code>.
                        </p>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Kernel-Provided Commands</h3>
                        <p class="text-gray-600 mb-4">
                            The kernel comes with a comprehensive set of built-in commands:
                        </p>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 mb-4">
                            <li><strong>Generate commands:</strong> <code class="bg-gray-100 px-2 py-1 rounded">generate:controller</code>, <code class="bg-gray-100 px-2 py-1 rounded">generate:model</code>, <code class="bg-gray-100 px-2 py-1 rounded">generate:migration</code>, <code class="bg-gray-100 px-2 py-1 rounded">generate:service</code>, <code class="bg-gray-100 px-2 py-1 rounded">generate:component</code>, <code class="bg-gray-100 px-2 py-1 rounded">generate:command</code>, <code class="bg-gray-100 px-2 py-1 rounded">generate:test</code>, <code class="bg-gray-100 px-2 py-1 rounded">generate:trait</code>, <code class="bg-gray-100 px-2 py-1 rounded">generate:enum</code>, <code class="bg-gray-100 px-2 py-1 rounded">generate:dto</code>, <code class="bg-gray-100 px-2 py-1 rounded">generate:event</code>, <code class="bg-gray-100 px-2 py-1 rounded">generate:middleware</code>, <code class="bg-gray-100 px-2 py-1 rounded">generate:seeder</code>, <code class="bg-gray-100 px-2 py-1 rounded">generate:module</code></li>
                            <li><strong>Asset commands:</strong> <code class="bg-gray-100 px-2 py-1 rounded">asset:link</code>, <code class="bg-gray-100 px-2 py-1 rounded">asset:unlink</code></li>
                            <li><strong>Storage commands:</strong> <code class="bg-gray-100 px-2 py-1 rounded">storage:link</code>, <code class="bg-gray-100 px-2 py-1 rounded">storage:unlink</code></li>
                            <li><strong>Cache commands:</strong> <code class="bg-gray-100 px-2 py-1 rounded">cache:flush</code></li>
                            <li><strong>Server commands:</strong> <code class="bg-gray-100 px-2 py-1 rounded">serve</code></li>
                            <li><strong>Key commands:</strong> <code class="bg-gray-100 px-2 py-1 rounded">key:generate</code></li>
                            <li><strong>Maintenance commands:</strong> <code class="bg-gray-100 px-2 py-1 rounded">maintenance:up</code>, <code class="bg-gray-100 px-2 py-1 rounded">maintenance:down</code></li>
                            <li><strong>Help commands:</strong> <code class="bg-gray-100 px-2 py-1 rounded">help</code></li>
                            <li><strong>Stats commands:</strong> <code class="bg-gray-100 px-2 py-1 rounded">stats</code></li>
                            <li><strong>Registry commands</strong> (developer mode): <code class="bg-gray-100 px-2 py-1 rounded">dev:registry:init</code>, <code class="bg-gray-100 px-2 py-1 rounded">dev:registry:list</code>, <code class="bg-gray-100 px-2 py-1 rounded">dev:registry:publish</code>, <code class="bg-gray-100 px-2 py-1 rounded">dev:registry:version</code></li>
                        </ul>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Module-Provided Commands</h3>
                        <p class="text-gray-600 mb-4">
                            Capabilities (modules) can provide their own commands. These commands are automatically discovered and work just like kernel commands:
                        </p>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 mb-4">
                            <li><strong>ForgePackageManager:</strong> <code class="bg-gray-100 px-2 py-1 rounded">package:install-module</code>, <code class="bg-gray-100 px-2 py-1 rounded">package:remove-module</code>, <code class="bg-gray-100 px-2 py-1 rounded">package:list-modules</code>, <code class="bg-gray-100 px-2 py-1 rounded">package:install-project</code></li>
                            <li><strong>ForgeDatabaseSQL:</strong> <code class="bg-gray-100 px-2 py-1 rounded">migrate</code>, <code class="bg-gray-100 px-2 py-1 rounded">migrate:rollback</code>, <code class="bg-gray-100 px-2 py-1 rounded">seed</code>, <code class="bg-gray-100 px-2 py-1 rounded">seed:rollback</code></li>
                            <li><strong>ForgeTesting:</strong> <code class="bg-gray-100 px-2 py-1 rounded">test</code></li>
                            <li><strong>ForgeStorage:</strong> <code class="bg-gray-100 px-2 py-1 rounded">storage:*</code> commands</li>
                        </ul>
                        <p class="text-gray-600 mb-4">
                            Module commands are placed in <code class="bg-gray-100 px-2 py-1 rounded">modules/ModuleName/src/Commands/</code> and follow the same structure as app commands.
                        </p>

                        <h3 class="text-lg font-semibold mb-3 text-gray-900">Available Traits</h3>
                        <p class="text-gray-600 mb-4">
                            Commands can use various traits to add functionality:
                        </p>

                        <h4 class="text-lg font-semibold mb-3 text-gray-900">OutputHelper</h4>
                        <p class="text-gray-600 mb-4">
                            Included in the <code class="bg-gray-100 px-2 py-1 rounded">Command</code> base class. Provides colored output methods:
                        </p>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 mb-4">
                            <li><code class="bg-gray-100 px-2 py-1 rounded">info($message)</code> — Blue informational messages</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">error($message)</code> — Red error messages</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">warning($message)</code> — Yellow warning messages</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">success($message)</code> — Green success messages</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">comment($message)</code> — Yellow comment messages</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">debug($message)</code> — Magenta debug messages</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">line($message)</code> — Simple line output</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">log($message, $context)</code> — Timestamped logging</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">table($headers, $rows)</code> — Display tabular data</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">array($data, $title)</code> — Display array data</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">clearScreen()</code> — Clear terminal screen</li>
                        </ul>

                        <h4 class="text-lg font-semibold mb-3 text-gray-900">Wizard</h4>
                        <p class="text-gray-600 mb-4">
                            Provides interactive prompts for missing required arguments. Automatically prompts users when arguments are not provided via command line:
                        </p>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 mb-4">
                            <li><code class="bg-gray-100 px-2 py-1 rounded">wizard($args)</code> — Automatically prompts for missing required arguments</li>
                            <li>Uses <code class="bg-gray-100 px-2 py-1 rounded">#[Arg]</code> attributes to determine what to prompt</li>
                            <li>Validates input based on <code class="bg-gray-100 px-2 py-1 rounded">validate</code> parameter in <code class="bg-gray-100 px-2 py-1 rounded">#[Arg]</code></li>
                            <li>Supports default values — if a default is provided and user presses Enter, the default is used</li>
                        </ul>
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">&lt;?php
// In your execute() method
public function execute(array $args): int
{
    $this->wizard($args);  // Prompts for any missing required arguments
    
    // Your command logic here
    return 0;
}</code></pre>
                        </div>

                        <h4 class="text-lg font-semibold mb-3 text-gray-900">CliGenerator</h4>
                        <p class="text-gray-600 mb-4">
                            Used by code generation commands (all <code class="bg-gray-100 px-2 py-1 rounded">generate:*</code> commands). Provides methods for generating files from stub templates:
                        </p>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 mb-4">
                            <li><code class="bg-gray-100 px-2 py-1 rounded">generateFromStub($stub, $targetPath, $tokens, $force)</code> — Generate files from stub templates</li>
                            <li>Helper methods for resolving paths: <code class="bg-gray-100 px-2 py-1 rounded">controllerPath()</code>, <code class="bg-gray-100 px-2 py-1 rounded">modelPath()</code>, <code class="bg-gray-100 px-2 py-1 rounded">migrationPath()</code>, etc.</li>
                            <li>Helper methods for resolving namespaces: <code class="bg-gray-100 px-2 py-1 rounded">controllerNamespace()</code>, <code class="bg-gray-100 px-2 py-1 rounded">modelNamespace()</code>, etc.</li>
                            <li>Automatically handles app vs module scope</li>
                            <li>Creates parent directories if they don't exist</li>
                        </ul>

                        <h4 class="text-lg font-semibold mb-3 text-gray-900">StringHelper</h4>
                        <p class="text-gray-600 mb-4">
                            Provides string transformation methods useful for code generation and formatting:
                        </p>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 mb-4">
                            <li><code class="bg-gray-100 px-2 py-1 rounded">toCamelCase($string)</code> — Convert to camelCase</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">toPascalCase($string)</code> — Convert to PascalCase</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">toSnakeCase($string)</code> — Convert to snake_case</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">toKebabCase($string)</code> — Convert to kebab-case</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">toTitleCase($string)</code> — Convert to Title Case</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">isCamelCase($string)</code>, <code class="bg-gray-100 px-2 py-1 rounded">isPascalCase($string)</code>, etc. — Validation methods</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">truncate($string, $length, $suffix)</code> — Truncate strings</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">slugify($string)</code> — Create URL-friendly slugs</li>
                        </ul>

                        <h4 class="text-lg font-semibold mb-3 text-gray-900">CommandOptionTrait</h4>
                        <p class="text-gray-600 mb-4">
                            Included in the <code class="bg-gray-100 px-2 py-1 rounded">Command</code> base class. Provides methods for parsing command-line arguments:
                        </p>
                        <ul class="list-disc list-inside space-y-2 text-gray-600 mb-4">
                            <li><code class="bg-gray-100 px-2 py-1 rounded">option($name, $args)</code> — Get option value (e.g., <code class="bg-gray-100 px-2 py-1 rounded">--option=value</code>)</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">flag($name, $args)</code> — Check if flag is present (e.g., <code class="bg-gray-100 px-2 py-1 rounded">--flag</code>)</li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">argument($name, $args)</code> — Get argument value (legacy method, prefer <code class="bg-gray-100 px-2 py-1 rounded">#[Arg]</code> attributes)</li>
                        </ul>
                    </section>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-8 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <div class="mb-4">
                <span class="text-lg font-bold">Forge Kernel</span>
            </div>
            <p class="text-gray-400">
                A toolbox for builders who like to do things their way.
            </p>
        </div>
    </footer>

    <script>
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Mobile menu toggle
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileSidebarButton = document.getElementById('mobile-sidebar-button');
        const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
        const sidebar = document.getElementById('sidebar-nav');

        function toggleMobileMenu() {
            mobileMenu.classList.toggle('hidden');
        }

        function openMobileSidebar() {
            sidebar.classList.add('mobile-menu-open');
            mobileMenuOverlay.classList.add('active');
        }

        function closeMobileSidebar() {
            sidebar.classList.remove('mobile-menu-open');
            mobileMenuOverlay.classList.remove('active');
        }

        if (mobileMenuButton) {
            mobileMenuButton.addEventListener('click', toggleMobileMenu);
        }

        if (mobileSidebarButton) {
            mobileSidebarButton.addEventListener('click', openMobileSidebar);
        }

        if (mobileMenuOverlay) {
            mobileMenuOverlay.addEventListener('click', closeMobileSidebar);
        }

        // Close mobile menu when clicking on a link
        document.querySelectorAll('#mobile-menu a').forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
            });
        });

        // Close mobile menu when clicking outside
        document.addEventListener('click', function (event) {
            const isClickInsideMenu = mobileMenu && mobileMenu.contains(event.target);
            const isClickOnMenuButton = mobileMenuButton && mobileMenuButton.contains(event.target);

            if (mobileMenu && !mobileMenu.classList.contains('hidden') && !isClickInsideMenu && !isClickOnMenuButton) {
                mobileMenu.classList.add('hidden');
            }
        });

        // Close mobile menu and sidebar on window resize if above mobile breakpoint
        window.addEventListener('resize', function () {
            if (window.innerWidth >= 640) {
                if (mobileMenu) mobileMenu.classList.add('hidden');
                closeMobileSidebar();
            }
        });

        // Update active navigation on scroll
        window.addEventListener('scroll', function () {
            const sections = document.querySelectorAll('.section-anchor');
            const navLinks = document.querySelectorAll('.nav-link');

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.pageYOffset >= sectionTop) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>

</html>
