<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ForgeDeployment - Forge Kernel Documentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/docs.css">
</head>

<body class="bg-gray-50 text-gray-900">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-xl font-bold text-gray-900">
                            Forge Kernel
                        </h1>
                    </div>
                    <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
                        <a href="index.html"
                            class="text-gray-900 inline-flex items-center px-1 pt-1 text-sm font-medium hover:text-blue-600">
                            Home
                        </a>
                        <a href="getting-started.html"
                            class="text-gray-900 inline-flex items-center px-1 pt-1 text-sm font-medium hover:text-blue-600">
                            Getting Started
                        </a>
                        <a href="core-concepts.html"
                            class="text-gray-900 inline-flex items-center px-1 pt-1 text-sm font-medium hover:text-blue-600">
                            Core Concepts
                        </a>
                        <a href="modules.html"
                            class="text-gray-900 inline-flex items-center px-1 pt-1 text-sm font-medium hover:text-blue-600">
                            Capabilities
                        </a>
                        <a href="api-reference.html"
                            class="text-gray-900 inline-flex items-center px-1 pt-1 text-sm font-medium hover:text-blue-600">
                            API Reference
                        </a>
                        <a href="tutorial.html"
                            class="text-gray-900 inline-flex items-center px-1 pt-1 text-sm font-medium hover:text-blue-600">
                            Tutorials
                        </a>
                    </div>
                </div>
                <div class="flex items-center sm:hidden">
                    <button id="mobile-menu-button" class="text-gray-700 hover:text-blue-600 px-3 py-2">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile menu -->
        <div id="mobile-menu" class="hidden sm:hidden bg-white border-t">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <a href="index.html" class="block px-3 py-2 text-gray-700 hover:text-blue-600">
                    Home
                </a>
                <a href="getting-started.html" class="block px-3 py-2 text-gray-700 hover:text-blue-600">
                    Getting Started
                </a>
                <a href="core-concepts.html" class="block px-3 py-2 text-gray-700 hover:text-blue-600">
                    Core Concepts
                </a>
                <a href="modules.html" class="block px-3 py-2 text-gray-700 hover:text-blue-600">
                    Capabilities
                </a>
                <a href="api-reference.html" class="block px-3 py-2 text-gray-700 hover:text-blue-600">
                    API Reference
                </a>
                <a href="tutorial.html" class="block px-3 py-2 text-gray-700 hover:text-blue-600">
                    Tutorials
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Sidebar Navigation -->
            <div class="lg:w-1/4">
                <div class="bg-white rounded-lg shadow-sm p-6 sticky top-8 max-h-[calc(100vh-4rem)] overflow-y-auto">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">
                        ForgeDeployment
                    </h3>
                    <nav class="space-y-2">
                        <a href="#overview"
                            class="nav-link block px-3 py-2 text-sm text-gray-700 rounded-md hover:text-blue-600">
                            Overview
                        </a>
                        <a href="#features"
                            class="nav-link block px-3 py-2 text-sm text-gray-700 rounded-md hover:text-blue-600">
                            Key Features
                        </a>
                        <a href="#architecture"
                            class="nav-link block px-3 py-2 text-sm text-gray-700 rounded-md hover:text-blue-600">
                            Architecture
                        </a>
                        <a href="#providers"
                            class="nav-link block px-3 py-2 text-sm text-gray-700 rounded-md hover:text-blue-600">
                            Cloud Providers
                        </a>
                        <a href="#commands"
                            class="nav-link block px-3 py-2 text-sm text-gray-700 rounded-md hover:text-blue-600">
                            CLI Commands
                        </a>
                        <a href="#services"
                            class="nav-link block px-3 py-2 text-sm text-gray-700 rounded-md hover:text-blue-600">
                            Services
                        </a>
                        <a href="#configuration"
                            class="nav-link block px-3 py-2 text-sm text-gray-700 rounded-md hover:text-blue-600">
                            Configuration
                        </a>
                        <a href="#installation"
                            class="nav-link block px-3 py-2 text-sm text-gray-700 rounded-md hover:text-blue-600">
                            Installation
                        </a>
                    </nav>
                </div>
            </div>

            <!-- Main Content -->
            <div class="lg:w-3/4">
                <div class="bg-white rounded-lg shadow-sm p-8">
                    <h1 class="text-4xl font-bold text-gray-900 mb-6">
                        ForgeDeployment
                    </h1>

                    <p class="text-xl text-gray-600 mb-8">
                        Complete deployment automation system for Forge applications. Deploy to cloud providers
                        with automated provisioning, rollback capabilities, and zero-downtime deployments.
                    </p>

                    <!-- Overview -->
                    <section id="overview" class="section-anchor mb-12">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">Overview</h2>
                        <p class="text-gray-600 mb-4">
                            ForgeDeployment automates the entire deployment pipeline from server creation to production
                            deployment. It solves the complexity of cloud infrastructure management by providing
                            automated provisioning, configuration, and deployment coordination.
                        </p>
                        
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6">
                            <h3 class="text-lg font-semibold text-blue-900 mb-3">Problems Solved</h3>
                            <ul class="list-disc list-inside space-y-2 text-blue-800">
                                <li><strong>Manual Server Setup:</strong> Automated cloud provider integration eliminates manual server configuration</li>
                                <li><strong>Deployment Downtime:</strong> Zero-downtime deployments with rollback capabilities</li>
                                <li><strong>SSL Management:</strong> Automated Let's Encrypt certificate generation and renewal</li>
                                <li><strong>Infrastructure as Code:</strong> Declarative configuration for reproducible deployments</li>
                                <li><strong>Multi-Provider Support:</strong> Extensible provider system for different cloud platforms</li>
                            </ul>
                        </div>
                    </section>

                    <!-- Key Features -->
                    <section id="features" class="section-anchor mb-12">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">Key Features</h2>
                        
                        <div class="grid md:grid-cols-2 gap-6 mb-8">
                            <div class="border border-gray-200 rounded-lg p-6">
                                <h3 class="font-semibold text-lg mb-3">Automated Provisioning</h3>
                                <ul class="list-disc list-inside space-y-2 text-gray-600">
                                    <li>DigitalOcean provider integration</li>
                                    <li>Custom provider extensibility</li>
                                    <li>SSH key management</li>
                                    <li>System installation (PHP, Nginx, Database)</li>
                                    <li>Environment-specific configurations</li>
                                </ul>
                            </div>

                            <div class="border border-gray-200 rounded-lg p-6">
                                <h3 class="font-semibold text-lg mb-3">Deployment Management</h3>
                                <ul class="list-disc list-inside space-y-2 text-gray-600">
                                    <li>Incremental project uploads</li>
                                    <li>Deployment state tracking</li>
                                    <li>Automatic rollback capabilities</li>
                                    <li>Git diff verification</li>
                                    <li>Zero-downtime deployments</li>
                                </ul>
                            </div>

                            <div class="border border-gray-200 rounded-lg p-6">
                                <h3 class="font-semibold text-lg mb-3">Security & SSL</h3>
                                <ul class="list-disc list-inside space-y-2 text-gray-600">
                                    <li>Let's Encrypt integration</li>
                                    <li>Custom SSL certificate support</li>
                                    <li>Automatic DNS configuration</li>
                                    <li>Secure SSH key handling</li>
                                    <li>Production environment safeguards</li>
                                </ul>
                            </div>

                            <div class="border border-gray-200 rounded-lg p-6">
                                <h3 class="font-semibold text-lg mb-3">Monitoring & Logging</h3>
                                <ul class="list-disc list-inside space-y-2 text-gray-600">
                                    <li>Real-time deployment status</li>
                                    <li>Detailed deployment logs</li>
                                    <li>Progress tracking with steps</li>
                                    <li>Hub dashboard integration</li>
                                    <li>Production environment detection</li>
                                </ul>
                            </div>
                        </div>
                    </section>

                    <!-- Architecture -->
                    <section id="architecture" class="section-anchor mb-12">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">Architecture</h2>
                        
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-mermaid">graph TD
    A[Deployment Controller] --> B[Deployment Hub Service]
    B --> C[Deployment Execution Service]
    B --> D[Provider Interface]
    B --> E[Configuration Reader]
    B --> F[State Service]
    C --> G[Provisioners]
    C --> H[SSH Service]
    D --> I[DigitalOcean Provider]
    D --> J[Custom Providers]
    F --> K[Deployment State]
    E --> L[Deployment Config]
    
    style A fill:#e5e7eb
    style B fill:#3b82f6
    style C fill:#10b981
    style D fill:#f59e0b
    style E fill:#ef4444
    style F fill:#8b5cf6
    style G fill:#6366f1
    style H fill:#ec4899
    style I fill:#3b82f6
    style J fill:#06b6d4
    style K fill:#8b5cf6
    style L fill:#ef4444</code></pre>
                        </div>

                        <div class="space-y-6">
                            <div class="border border-gray-200 rounded-lg p-6">
                                <h3 class="font-semibold text-lg mb-3">Provider Abstraction</h3>
                                <p class="text-gray-600 mb-4">
                                    Extensible provider system allows adding new cloud providers through a simple interface.
                                </p>
                                <ul class="list-disc list-inside space-y-2 text-gray-600">
                                    <li>DigitalOcean provider included</li>
                                    <li>Custom providers via ProviderInterface</li>
                                    <li>Provider-specific configuration management</li>
                                    <li>API key and credential handling</li>
                                </ul>
                            </div>

                            <div class="border border-gray-200 rounded-lg p-6">
                                <h3 class="font-semibold text-lg mb-3">State Management</h3>
                                <p class="text-gray-600 mb-4">
                                    Complete deployment state tracking with validation and recovery capabilities.
                                </p>
                                <ul class="list-disc list-inside space-y-2 text-gray-600">
                                    <li>Step-by-step progress tracking</li>
                                    <li>State validation and recovery</li>
                                    <li>Resume interrupted deployments</li>
                                    <li>Rollback point management</li>
                                </ul>
                            </div>
                        </div>
                    </section>

                    <!-- Cloud Providers -->
                    <section id="providers" class="section-anchor mb-12">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">Cloud Providers</h2>
                        
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="border border-gray-200 rounded-lg p-6">
                                <h3 class="font-semibold text-lg mb-3 text-blue-600">DigitalOcean</h3>
                                <p class="text-gray-600 mb-4">
                                    Full-featured provider for DigitalOcean cloud platform.
                                </p>
                                <ul class="list-disc list-inside space-y-2 text-gray-600">
                                    <li>Droplet creation and management</li>
                                    <li>SSH key provisioning</li>
                                    <li>Firewall configuration</li>
                                    <li>Domain management</li>
                                    <li>Resource monitoring</li>
                                </ul>
                            </div>

                            <div class="border border-gray-200 rounded-lg p-6">
                                <h3 class="font-semibold text-lg mb-3 text-green-600">Custom Providers</h3>
                                <p class="text-gray-600 mb-4">
                                    Extensible system for adding your own cloud providers.
                                </p>
                                <ul class="list-disc list-inside space-y-2 text-gray-600">
                                    <li>Implement ProviderInterface</li>
                                    <li>Custom provisioning logic</li>
                                    <li>Provider-specific configurations</li>
                                    <li>Plugin architecture</li>
                                </ul>
                            </div>
                        </div>
                    </section>

                    <!-- CLI Commands -->
                    <section id="commands" class="section-anchor mb-12">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">CLI Commands</h2>
                        
                        <div class="space-y-6">
                            <div class="border border-gray-200 rounded-lg p-6">
                                <h3 class="font-semibold text-lg mb-3">Deployment Commands</h3>
                                <div class="code-block p-6 text-white rounded-lg mb-4">
                                    <pre><code class="language-bash"># Full deployment wizard
forge-deployment:deploy

# With specific provider
forge-deployment:deploy --provider=digitalocean

# With custom config
forge-deployment:deploy --config=./deployment.php

# With SSH key
forge-deployment:deploy --ssh-key=~/.ssh/id_rsa.pub</code></pre>
                                </div>
                                <ul class="list-disc list-inside space-y-2 text-gray-600">
                                    <li>Interactive deployment wizard</li>
                                    <li>Resume interrupted deployments</li>
                                    <li>Provider selection and configuration</li>
                                    <li>SSH key management</li>
                                </ul>
                            </div>

                            <div class="border border-gray-200 rounded-lg p-6">
                                <h3 class="font-semibold text-lg mb-3">Management Commands</h3>
                                <div class="code-block p-6 text-white rounded-lg mb-4">
                                    <pre><code class="language-bash"># Server management
forge-deployment:create-server
forge-deployment:delete-server
forge-deployment:configure-dns

# Deployment management
forge-deployment:deploy-env
forge-deployment:rollback
forge-deployment:resume
forge-deployment:status
forge-deployment:update

# SSL and security
forge-deployment:setup-ssl
forge-deployment:fix-permissions

# Configuration
forge-deployment:init-deployment-config</code></pre>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Services -->
                    <section id="services" class="section-anchor mb-12">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">Core Services</h2>
                        
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="border border-gray-200 rounded-lg p-6">
                                <h3 class="font-semibold text-lg mb-3">Deployment Services</h3>
                                <div class="code-block p-6 text-white rounded-lg">
                                    <pre><code class="language-php">DeploymentHubService
├── State management
├── Configuration handling  
├── Progress tracking
└── Logging coordination

DeploymentExecutionService
├── Provider orchestration
├── Provisioning coordination
├── Upload automation
└── Rollback management</code></pre>
                                </div>
                            </div>

                            <div class="border border-gray-200 rounded-lg p-6">
                                <h3 class="font-semibold text-lg mb-3">Support Services</h3>
                                <div class="code-block p-6 text-white rounded-lg">
                                    <pre><code class="language-php">SshService
├── Connection management
├── Command execution
└── Key handling

LetsEncryptService  
├── Certificate generation
├── DNS configuration
└── Auto-renewal

CloudflareService
├── DNS management
├── SSL management
└── API integration</code></pre>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Configuration -->
                    <section id="configuration" class="section-anchor mb-12">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">Configuration</h2>
                        
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-php">// deployment.php - Complete deployment configuration
return [
    'provider' => 'digitalocean',
    'server' => [
        'name' => 'my-app-server',
        'region' => 'nyc3',
        'size' => 's-2vcpu-4gb',
        'image' => 'ubuntu-22-04-x64',
    ],
    'ssh' => [
        'key_path' => '~/.ssh/deploy_key.pub',
        'user' => 'forge',
    ],
    'domain' => [
        'name' => 'myapp.com',
        'subdomains' => ['api', 'www'],
    ],
    'ssl' => [
        'enabled' => true,
        'email' => 'admin@myapp.com',
        'type' => 'letsencrypt',
    ],
    'provision' => [
        'php' => '8.3',
        'nginx' => true,
        'database' => 'mysql',
        'system_packages' => ['git', 'curl', 'zip'],
    ],
    'deployment' => [
        'path' => '/var/www/myapp',
        'repository' => 'git@github.com:user/myapp.git',
        'branch' => 'main',
        'exclude' => ['.env', 'node_modules', 'storage/logs'],
    ],
];</code></pre>
                        </div>

                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                            <h4 class="font-semibold text-yellow-800 mb-2">Security Note</h4>
                            <p class="text-sm text-yellow-700">
                                All sensitive configuration values (API tokens, passwords, SSH keys) are automatically masked 
                                in logs and UI responses. Use environment variables for production deployments.
                            </p>
                        </div>
                    </section>

                    <!-- Installation -->
                    <section id="installation" class="section-anchor mb-12">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">Installation</h2>
                        
                        <div class="code-block p-6 text-white rounded-lg mb-6">
                            <pre><code class="language-bash"># Install ForgeDeployment module
php forge.php package:install-module --module=forge-deployment

# Install with dependencies (ForgeHub, ForgeLogger, etc.)
php forge.php package:install-module forge-deployment forge-hub forge-logger

# Force reinstallation
php forge.php package:install-module --module=forge-deployment --force</code></pre>
                        </div>

                        <div class="bg-green-50 border border-green-200 rounded-lg p-6">
                            <h3 class="font-semibold text-green-800 mb-3">Module Registration</h3>
                            <p class="text-green-700 mb-4">
                                ForgeDeployment automatically registers with Forge Kernel and provides:
                            </p>
                            <ul class="list-disc list-inside space-y-2 text-green-700">
                                <li>Hub integration under /hub/deployment</li>
                                <li>Middleware and permission integration</li>
                                <li>Configuration defaults management</li>
                                <li>CLI command registration</li>
                                <li>Service container registration</li>
                            </ul>
                        </div>

                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-6">
                            <h3 class="font-semibold text-blue-800 mb-3">Environment Setup</h3>
                            <div class="code-block p-6 text-white">
                                <pre><code class="language-env"># Required environment variables
FORGE_DEPLOYMENT_DIGITALOCEAN_API_TOKEN=your_api_token
FORGE_DEPLOYMENT_CLOUDFLARE_API_TOKEN=your_cloudflare_token

# Optional configuration files
# .env.local - Local development overrides
# .env.production - Production-specific values</code></pre>
                            </div>
                        </div>
                    </section>

                    <!-- Usage Examples -->
                    <section class="section-anchor mb-12">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4">Usage Examples</h2>
                        
                        <div class="space-y-6">
                            <div class="border border-gray-200 rounded-lg p-6">
                                <h3 class="font-semibold text-lg mb-3">Hub Dashboard Integration</h3>
                                <p class="text-gray-600 mb-4">
                                    ForgeDeployment provides a complete Hub dashboard for managing deployments:
                                </p>
                                <div class="code-block p-6 text-white">
                                    <pre><code class="language-php">// Controller integration
#[Route("/hub/deployment")]
public function index(): Response
{
    $status = $this->deploymentHubService->getDeploymentStatus();
    $config = $this->deploymentHubService->getDeploymentConfig();
    $logs = $this->deploymentHubService->listDeploymentLogs();
    
    return $this->view("pages/hub/deployment", [
        'title' => "Deployment",
        'status' => $status,
        'config' => $config,
        'logs' => $logs,
    ]);
}</code></pre>
                                </div>
                            </div>

                            <div class="border border-gray-200 rounded-lg p-6">
                                <h3 class="font-semibold text-lg mb-3">Custom Provider Development</h3>
                                <p class="text-gray-600 mb-4">
                                    Create custom cloud providers by implementing the ProviderInterface:
                                </p>
                                <div class="code-block p-6 text-white">
                                    <pre><code class="language-php">class CustomProvider implements ProviderInterface
{
    public function createServer(ServerConfig $config): array
    {
        // Custom server creation logic
        return ['id' => 'server-123', 'ip' => '192.168.1.100'];
    }
    
    public function provisionSystem(ProvisionConfig $config): bool
    {
        // Custom provisioning logic
        return true;
    }
    
    public function configureDomain(string $domain): bool
    {
        // Custom domain configuration
        return true;
    }
}</code></pre>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="text-center">
                <p class="text-gray-400">
                    &copy; 2024 Forge Kernel. Built with passion for PHP developers.
                </p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // Mobile menu toggle
        document.getElementById('mobile-menu-button')?.addEventListener('click', () => {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });

        // Smooth scroll for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Active navigation state
        function updateActiveNav() {
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.nav-link');
            
            let currentSection = '';
            sections.forEach(section => {
                const rect = section.getBoundingClientRect();
                if (rect.top <= 100 && rect.bottom >= 100) {
                    currentSection = section.id;
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('text-blue-600', 'bg-blue-50');
                if (link.getAttribute('href') === '#' + currentSection) {
                    link.classList.add('text-blue-600', 'bg-blue-50');
                }
            });
        }

        window.addEventListener('scroll', updateActiveNav);
        updateActiveNav();
    </script>

    <!-- Mermaid.js for diagrams -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
</body>
</html>