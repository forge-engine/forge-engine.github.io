<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Core Kernel API - Forge Kernel Documentation</title>
    <link rel="stylesheet" href="assets/css/forge-docs.css">
</head>
<body>
    <div class="docs-container">
        <aside class="sidebar">
            <nav>
                <ul class="sidebar-nav">
                    <li class="sidebar-nav-group">
                        <div class="sidebar-nav-group-title">Navigation</div>
                        <ul class="sidebar-nav" style="list-style: none; padding-left: 0;">
                            <li class="sidebar-nav-item">
                                <a href="index.html" class="sidebar-nav-link">Home</a>
                            </li>
                            <li class="sidebar-nav-item">
                                <a href="introduction.html" class="sidebar-nav-link">Introduction</a>
                            </li>
                            <li class="sidebar-nav-item">
                                <a href="getting-started.html" class="sidebar-nav-link">Getting Started</a>
                            </li>
                            <li class="sidebar-nav-item">
                                <a href="core-concepts.html" class="sidebar-nav-link">Core Concepts</a>
                            </li>
                            <li class="sidebar-nav-item">
                                <a href="modules.html" class="sidebar-nav-link">Capabilities</a>
                            </li>
                            <li class="sidebar-nav-item">
                                <a href="api-reference.html" class="sidebar-nav-link">API Reference</a>
                            </li>
                        </ul>
                    </li>
                    <li class="sidebar-nav-group">
                        <div class="sidebar-nav-group-title">API Sections</div>
                        <ul class="sidebar-nav" style="list-style: none; padding-left: 0;">
                            <li class="sidebar-nav-item">
                                <a href="api-core.html" class="sidebar-nav-link active">Core Engine</a>
                            </li>
                            <li class="sidebar-nav-item">
                                <a href="api-http.html" class="sidebar-nav-link">HTTP Layer</a>
                            </li>
                            <li class="sidebar-nav-item">
                                <a href="api-database.html" class="sidebar-nav-link">Database & ORM</a>
                            </li>
                            <li class="sidebar-nav-item">
                                <a href="api-di.html" class="sidebar-nav-link">DI Container</a>
                            </li>
                            <li class="sidebar-nav-item">
                                <a href="api-routing.html" class="sidebar-nav-link">Routing</a>
                            </li>
                            <li class="sidebar-nav-item">
                                <a href="api-modules.html" class="sidebar-nav-link">Module System</a>
                            </li>
                            <li class="sidebar-nav-item">
                                <a href="api-cli.html" class="sidebar-nav-link">CLI & Console</a>
                            </li>
                            <li class="sidebar-nav-item">
                                <a href="api-cache.html" class="sidebar-nav-link">Caching</a>
                            </li>
                            <li class="sidebar-nav-item">
                                <a href="api-validation.html" class="sidebar-nav-link">Validation</a>
                            </li>
                            <li class="sidebar-nav-item">
                                <a href="api-helpers.html" class="sidebar-nav-link">Helpers & Traits</a>
                            </li>
                            <li class="sidebar-nav-item">
                                <a href="api-events.html" class="sidebar-nav-link">Events</a>
                            </li>
                            <li class="sidebar-nav-item">
                                <a href="api-security.html" class="sidebar-nav-link">Security</a>
                            </li>
                        </ul>
                    </li>
                    <li class="sidebar-nav-group">
                        <div class="sidebar-nav-group-title">On This Page</div>
                        <ul class="sidebar-nav" style="list-style: none; padding-left: 0;">
                            <li class="sidebar-nav-item">
                                <a href="#engine" class="sidebar-nav-link">Engine</a>
                            </li>
                            <li class="sidebar-nav-item">
                                <a href="#bootstrap" class="sidebar-nav-link">Bootstrap</a>
                            </li>
                            <li class="sidebar-nav-item">
                                <a href="#autoloader" class="sidebar-nav-link">Autoloader</a>
                            </li>
                            <li class="sidebar-nav-item">
                                <a href="#loader" class="sidebar-nav-link">Loader</a>
                            </li>
                            <li class="sidebar-nav-item">
                                <a href="#service-discover" class="sidebar-nav-link">ServiceDiscoverSetup</a>
                            </li>
                            <li class="sidebar-nav-item">
                                <a href="#container" class="sidebar-nav-link">Container</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </aside>

        <button class="mobile-menu-toggle" aria-label="Toggle menu">â˜°</button>
        <div class="mobile-overlay"></div>

        <main class="main-content">
            <article>
                <header class="docs-header">
                    <h1>Core Kernel API</h1>
                    <p>Essential classes that power the Forge Kernel. These core components handle application initialization, service discovery, class loading, and the overall application lifecycle.</p>
                </header>

                <section id="engine">
                    <h2>Engine</h2>
                    <p>
                        The main application engine that bootstraps and runs the kernel. The Engine class is responsible for initializing the application, loading capabilities, and handling the request-response cycle.
                    </p>

                    <h3>Constructor & Properties</h3>
                    <h4>__construct(Container $container)</h4>
                    <p>Initialize the engine with a dependency injection container.</p>
                    <div class="code-block">
                        <pre><code>&lt;?php
$container = new Container();
$engine = new Engine($container);</code></pre>
                    </div>

                    <h3>Core Methods</h3>
                    <h4>run(): void</h4>
                    <p>Starts the application and handles the incoming request.</p>
                    <div class="code-block">
                        <pre><code>&lt;?php
$engine = new Engine($container);
$engine->run();</code></pre>
                    </div>

                    <h4>getContainer(): Container</h4>
                    <p>Returns the dependency injection container instance.</p>
                    <div class="code-block">
                        <pre><code>&lt;?php
$container = $engine->getContainer();
$service = $container->get(MyService::class);</code></pre>
                    </div>

                    <h4>loadModules(): void</h4>
                    <p>Load and initialize all registered capabilities.</p>
                    <div class="code-block">
                        <pre><code>&lt;?php
$engine->loadModules();</code></pre>
                    </div>
                </section>

                <section id="bootstrap">
                    <h2>Bootstrap</h2>
                    <p>
                        Handles application initialization and service registration. The Bootstrap class is responsible for setting up essential services, loading configuration, and preparing the application for execution.
                    </p>

                    <h3>Static Methods</h3>
                    <h4>boot(Container $container): void</h4>
                    <p>Bootstraps the application with essential services.</p>
                    <div class="code-block">
                        <pre><code>&lt;?php
$container = new Container();
Bootstrap::boot($container);</code></pre>
                    </div>

                    <h4>loadServices(Container $container): void</h4>
                    <p>Load and register core services in the container.</p>
                    <div class="code-block">
                        <pre><code>&lt;?php
Bootstrap::loadServices($container);</code></pre>
                    </div>

                    <h4>loadConfiguration(): void</h4>
                    <p>Load application configuration from config files.</p>
                    <div class="code-block">
                        <pre><code>&lt;?php
Bootstrap::loadConfiguration();</code></pre>
                    </div>
                </section>

                <section id="autoloader">
                    <h2>Autoloader</h2>
                    <p>
                        Manages class loading and namespace registration. The Autoloader handles automatic loading of classes using PSR-4 autoloading standards and provides namespace mapping capabilities.
                    </p>

                    <h3>Static Methods</h3>
                    <h4>register(): void</h4>
                    <p>Register the autoloader with PHP's spl_autoload system.</p>
                    <div class="code-block">
                        <pre><code>&lt;?php
Autoloader::register();</code></pre>
                    </div>

                    <h4>addNamespace(string $namespace, string $path): void</h4>
                    <p>Add a namespace to directory mapping.</p>
                    <div class="code-block">
                        <pre><code>&lt;?php
Autoloader::addNamespace('App\\Controllers', 'app/controllers');
Autoloader::addNamespace('App\\Models', 'app/models');</code></pre>
                    </div>

                    <h4>loadClass(string $class): bool</h4>
                    <p>Attempt to load a specific class.</p>
                    <div class="code-block">
                        <pre><code>&lt;?php
$loaded = Autoloader::loadClass('App\\Controllers\\UserController');</code></pre>
                    </div>
                </section>

                <section id="loader">
                    <h2>Loader</h2>
                    <p>
                        Loads capabilities and their dependencies. The Loader class is responsible for discovering, loading, and initializing capabilities within the application.
                    </p>

                    <h3>Core Methods</h3>
                    <h4>loadModule(string $modulePath): void</h4>
                    <p>Load a specific capability from its path.</p>
                    <div class="code-block">
                        <pre><code>&lt;?php
$loader = new Loader();
$loader->loadModule('modules/ForgeAuth');</code></pre>
                    </div>

                    <h4>getLoadedModules(): array</h4>
                    <p>Get all currently loaded capabilities.</p>
                    <div class="code-block">
                        <pre><code>&lt;?php
$modules = $loader->getLoadedModules();
foreach ($modules as $module) {
    echo $module->getName() . "\n";
}</code></pre>
                    </div>
                </section>

                <section id="service-discover">
                    <h2>ServiceDiscoverSetup</h2>
                    <p>
                        Discovers and registers services and event listeners. This class handles automatic service discovery, dependency injection setup, and event listener registration throughout the application.
                    </p>

                    <h3>Core Methods</h3>
                    <h4>discoverServices(): void</h4>
                    <p>Discover and register all available services.</p>
                    <div class="code-block">
                        <pre><code>&lt;?php
$discover = new ServiceDiscoverSetup();
$discover->discoverServices();</code></pre>
                    </div>

                    <h4>registerEventListeners(): void</h4>
                    <p>Register all event listeners found in the application.</p>
                    <div class="code-block">
                        <pre><code>&lt;?php
$discover->registerEventListeners();</code></pre>
                    </div>
                </section>

                <section id="container">
                    <h2>Container</h2>
                    <p>
                        The dependency injection container for managing services and dependencies. Provides service registration, resolution, and lifecycle management for the entire application.
                    </p>

                    <h3>Service Registration</h3>
                    <h4>bind(string $abstract, string|callable $concrete = null): void</h4>
                    <p>Bind a service to the container.</p>
                    <div class="code-block">
                        <pre><code>&lt;?php
$container->bind(UserService::class);
$container->bind(PaymentInterface::class, StripePayment::class);
$container->bind('config', fn() => new Config());</code></pre>
                    </div>

                    <h4>singleton(string $abstract, string|callable $concrete = null): void</h4>
                    <p>Bind a singleton service to the container.</p>
                    <div class="code-block">
                        <pre><code>&lt;?php
$container->singleton(CacheManager::class);
$container->singleton('logger', LoggerService::class);</code></pre>
                    </div>

                    <h3>Service Resolution</h3>
                    <h4>get(string $abstract): mixed</h4>
                    <p>Resolve a service from the container.</p>
                    <div class="code-block">
                        <pre><code>&lt;?php
$userService = $container->get(UserService::class);
$logger = $container->get('logger');</code></pre>
                    </div>

                    <h4>has(string $abstract): bool</h4>
                    <p>Check if a service is bound in the container.</p>
                    <div class="code-block">
                        <pre><code>&lt;?php
if ($container->has(UserService::class)) {
    $service = $container->get(UserService::class);
}</code></pre>
                    </div>
                </section>

                <section id="examples">
                    <h2>Usage Examples</h2>
                    <p>
                        Common patterns and examples for working with the Core Kernel classes.
                    </p>

                    <h3>Basic Application Setup</h3>
                    <div class="code-block">
                        <pre><code>&lt;?php
// Initialize autoloader
Autoloader::register();
Autoloader::addNamespace('App\\Controllers', 'app/controllers');
Autoloader::addNamespace('App\\Models', 'app/models');

// Create container and bootstrap
$container = new Container();
Bootstrap::boot($container);

// Create and run engine
$engine = new Engine($container);
$engine->run();</code></pre>
                    </div>

                    <h3>Service Registration Pattern</h3>
                    <div class="code-block">
                        <pre><code>&lt;?php
// Register services in container
$container->singleton(DatabaseConnection::class, function() {
    return new DatabaseConnection([
        'host' => 'localhost',
        'database' => 'myapp',
        'username' => 'root',
        'password' => 'password'
    ]);
});

$container->bind(UserService::class, function($container) {
    return new UserService(
        $container->get(DatabaseConnection::class)
    );
});

// Use registered services
$userService = $container->get(UserService::class);</code></pre>
                    </div>

                    <h3>Capability Loading Pattern</h3>
                    <div class="code-block">
                        <pre><code>&lt;?php
$loader = new Loader();

// Load specific capabilities
$loader->loadModule('modules/ForgeAuth');
$loader->loadModule('modules/ForgeCache');

// Get loaded capabilities
$modules = $loader->getLoadedModules();
foreach ($modules as $module) {
    echo "Loaded: " . $module->getName() . "\n";
    echo "Version: " . $module->getVersion() . "\n";
}</code></pre>
                    </div>
                </section>

                <section id="best-practices">
                    <h2>Best Practices</h2>
                    <p>
                        Recommended patterns and guidelines for working with the Core Kernel.
                    </p>

                    <h3>Do's</h3>
                    <ul>
                        <li>Always register the autoloader first</li>
                        <li>Use dependency injection for service management</li>
                        <li>Follow PSR-4 autoloading standards</li>
                        <li>Register services as singletons when appropriate</li>
                        <li>Use interfaces for service contracts</li>
                        <li>Bootstrap the application before running the engine</li>
                    </ul>

                    <h3>Don'ts</h3>
                    <ul>
                        <li>Don't create circular dependencies</li>
                        <li>Don't manually require class files</li>
                        <li>Don't bypass the container for service creation</li>
                        <li>Don't register services in the wrong order</li>
                        <li>Don't ignore namespace conventions</li>
                        <li>Don't skip error handling in service registration</li>
                    </ul>
                </section>
            </article>
        </main>
    </div>

    <script src="assets/js/docs.js"></script>
</body>
</html>
